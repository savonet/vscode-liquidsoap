>#!../../liquidsoap ../test.liq
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap comment.line.number-sign.liquidsoap
>
>success = ref(true)
#^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
>
>def t(x, y)
#^^^ source.liquidsoap keyword.control.liquidsoap
#   ^^^^^^^^^ source.liquidsoap
>  if x != y then
#^^ source.liquidsoap
#  ^^ source.liquidsoap keyword.control.liquidsoap
#    ^^^^^^^^ source.liquidsoap
#            ^^^^ source.liquidsoap keyword.control.liquidsoap
>    print("Failure: got #{x} instead of #{y}")
#^^^^^^^^^^ source.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                                             ^^ source.liquidsoap
>    success := false
#^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
>  end
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
>end
#^^^ source.liquidsoap keyword.control.liquidsoap
>
>def f() =
#^^^ source.liquidsoap keyword.control.liquidsoap
#   ^^^^^^^ source.liquidsoap
>  t(1::2::[3,4], [1,2,3,4])
#^^^^ source.liquidsoap
#    ^ source.liquidsoap constant.numeric.integer
#     ^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^^ source.liquidsoap
#           ^ source.liquidsoap constant.numeric.integer
#            ^ source.liquidsoap
#             ^ source.liquidsoap constant.numeric.integer
#              ^^^^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^ source.liquidsoap
#                      ^ source.liquidsoap constant.numeric.integer
#                       ^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^^ source.liquidsoap
>  t(list.hd(default=0,[]), 0)
#^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^^^^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^ source.liquidsoap
>  t(list.hd([5,6]), 5)
#^^^^^^^^^^^^^ source.liquidsoap
#             ^ source.liquidsoap constant.numeric.integer
#              ^ source.liquidsoap
#               ^ source.liquidsoap constant.numeric.integer
#                ^^^^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^ source.liquidsoap
>  t(try list.hd([]) catch _ do 9 end, 9)
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                            ^^ source.liquidsoap keyword.control.liquidsoap
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                                    ^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
>  t(list.tl([]), [])
#^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
>  t(list.tl([4,5,6]), [5,6])
#^^^^^^^^^^^^^ source.liquidsoap
#             ^ source.liquidsoap constant.numeric.integer
#              ^ source.liquidsoap
#               ^ source.liquidsoap constant.numeric.integer
#                ^ source.liquidsoap
#                 ^ source.liquidsoap constant.numeric.integer
#                  ^^^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^^^ source.liquidsoap
>  t(list.nth(default=1,[4],5), 1)
#^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^^ source.liquidsoap
>  t(list.nth([4,5,6,7],2), 6)
#^^^^^^^^^^^^^^ source.liquidsoap
#              ^ source.liquidsoap constant.numeric.integer
#               ^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^ source.liquidsoap
>  t(list.last(default=1,[]), 1)
#^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                      ^ source.liquidsoap constant.numeric.integer
#                       ^^^^^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^^ source.liquidsoap
>  t(list.last([12,5,8]), 8)
#^^^^^^^^^^^^^^^ source.liquidsoap
#               ^^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^^^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^^ source.liquidsoap
>  t(list.length([]), 0)
#^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^^ source.liquidsoap
>  t(list.length([1,2,3]), 3)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^ source.liquidsoap constant.numeric.integer
#                  ^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^^^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
>  t(list.length(["a","b"]), 2)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap string.quoted.double.liquidsoap
#                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                        ^^^^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^ source.liquidsoap
>  t(list.mem(1,[4,5,6]), false)
#^^^^^^^^^^^^^ source.liquidsoap
#             ^ source.liquidsoap constant.numeric.integer
#              ^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^^^^^^^^^^ source.liquidsoap
>  t(list.mem(5,[4,5,6]), true)
#^^^^^^^^^^^^^ source.liquidsoap
#             ^ source.liquidsoap constant.numeric.integer
#              ^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^^^^^^^^^^ source.liquidsoap
>  t(list.assoc.mem(1,[(4,"bla"),(5,"foo"),(6,"gni")]), false)
#^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^ source.liquidsoap
#                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                              ^^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                    ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                                        ^^^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                              ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                  ^^^^^^^^^^^^ source.liquidsoap
>  t(list.assoc.mem(5,[(4,"bla"),(5,"foo"),(6,"gni")]), true)
#^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^ source.liquidsoap
#                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                              ^^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                    ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                                        ^^^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                              ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                  ^^^^^^^^^^^ source.liquidsoap
>  t(list.map(fun (x) -> 2*x,[1,2,3]), [2,4,6])
#^^^^^^^^^^^^^ source.liquidsoap
#             ^^^ source.liquidsoap keyword.control.liquidsoap
#                ^^^^^^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^^^^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^^^ source.liquidsoap
>  t(list.map(fun (x) -> 2.*x,[1.,2.,3.]), [2.,4.,6.])
#^^^^^^^^^^^^^ source.liquidsoap
#             ^^^ source.liquidsoap keyword.control.liquidsoap
#                ^^^^^^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^^^^ source.liquidsoap
#                              ^ source.liquidsoap constant.numeric.integer
#                               ^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^^^^^^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^^ source.liquidsoap
#                                              ^ source.liquidsoap constant.numeric.integer
#                                               ^^ source.liquidsoap
#                                                 ^ source.liquidsoap constant.numeric.integer
#                                                  ^^^^ source.liquidsoap
>  t(list.map.right(fun (x) -> 2*x,[1,2,3]), [2,4,6])
#^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                   ^^^ source.liquidsoap keyword.control.liquidsoap
#                      ^^^^^^^^ source.liquidsoap
#                              ^ source.liquidsoap constant.numeric.integer
#                               ^^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^^^^^ source.liquidsoap
#                                             ^ source.liquidsoap constant.numeric.integer
#                                              ^ source.liquidsoap
#                                               ^ source.liquidsoap constant.numeric.integer
#                                                ^ source.liquidsoap
#                                                 ^ source.liquidsoap constant.numeric.integer
#                                                  ^^^ source.liquidsoap
>  t(list.mapi(fun (i,x) -> i+x,[1,1,2]), [1,2,4])
#^^^^^^^^^^^^^^ source.liquidsoap
#              ^^^ source.liquidsoap keyword.control.liquidsoap
#                 ^^^^^^^^^^^^^^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^^^^^ source.liquidsoap
#                                          ^ source.liquidsoap constant.numeric.integer
#                                           ^ source.liquidsoap
#                                            ^ source.liquidsoap constant.numeric.integer
#                                             ^ source.liquidsoap
#                                              ^ source.liquidsoap constant.numeric.integer
#                                               ^^^ source.liquidsoap
>  t(list.filter(fun (x) -> x mod 2 == 0,[1,2,3,4,5]), [2,4])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^^^ source.liquidsoap keyword.control.liquidsoap
#                   ^^^^^^^^^^^^^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap constant.numeric.integer
#                                              ^ source.liquidsoap
#                                               ^ source.liquidsoap constant.numeric.integer
#                                                ^ source.liquidsoap
#                                                 ^ source.liquidsoap constant.numeric.integer
#                                                  ^^^^^ source.liquidsoap
#                                                       ^ source.liquidsoap constant.numeric.integer
#                                                        ^ source.liquidsoap
#                                                         ^ source.liquidsoap constant.numeric.integer
#                                                          ^^^ source.liquidsoap
>  t(list.remove(1,[3,1,2,1,1]), [3,2,1,1])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^^^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^^^ source.liquidsoap
>  t(list.remove(1,[3,2]), [3,2])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^^^^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^^^ source.liquidsoap
>  t(list.append([1,2], [3,4,5]), [1,2,3,4,5])
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^ source.liquidsoap constant.numeric.integer
#                  ^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^^^^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^ source.liquidsoap
#                                          ^ source.liquidsoap constant.numeric.integer
#                                           ^^^ source.liquidsoap
>  t(list.rev([1,2,3]), [3,2,1])
#^^^^^^^^^^^^^^ source.liquidsoap
#              ^ source.liquidsoap constant.numeric.integer
#               ^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap constant.numeric.integer
#                   ^^^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^^ source.liquidsoap
>  t(list.assoc(default=0, "", [("a",1),("b",2)]), 0)
#^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^ source.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^^^^ source.liquidsoap
#                                ^ source.liquidsoap string.quoted.double.liquidsoap
#                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                   ^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^^^ source.liquidsoap
#                                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                                           ^ source.liquidsoap
#                                            ^ source.liquidsoap constant.numeric.integer
#                                             ^^^^^ source.liquidsoap
#                                                  ^ source.liquidsoap constant.numeric.integer
#                                                   ^^ source.liquidsoap
>  t(list.assoc("b", [("a",1),("b",2)]), 2)
#^^^^^^^^^^^^^^^ source.liquidsoap
#               ^ source.liquidsoap string.quoted.double.liquidsoap
#                ^ source.liquidsoap string.quoted.double.liquidsoap
#                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                  ^^^^ source.liquidsoap
#                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^^ source.liquidsoap
#                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                ^ source.liquidsoap string.quoted.double.liquidsoap
#                                 ^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^^^^^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^^ source.liquidsoap
>  t(list.assoc.remove("a", [("b",2),("a",1),("a",3)]), [("b",2),("a",3)])
#^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^^^^ source.liquidsoap
#                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^^ source.liquidsoap
#                                     ^ source.liquidsoap string.quoted.double.liquidsoap
#                                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                                        ^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^^^ source.liquidsoap
#                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                ^ source.liquidsoap
#                                                 ^ source.liquidsoap constant.numeric.integer
#                                                  ^^^^^^^ source.liquidsoap
#                                                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                            ^ source.liquidsoap
#                                                             ^ source.liquidsoap constant.numeric.integer
#                                                              ^^^ source.liquidsoap
#                                                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                                    ^ source.liquidsoap
#                                                                     ^ source.liquidsoap constant.numeric.integer
#                                                                      ^^^^ source.liquidsoap
>  t(list.assoc.remove.all("c", [("c",1),("b",2),("c",2)]), [("b",2)])
#^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^^^^ source.liquidsoap
#                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^^^ source.liquidsoap
#                                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap constant.numeric.integer
#                                              ^^^ source.liquidsoap
#                                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                    ^ source.liquidsoap
#                                                     ^ source.liquidsoap constant.numeric.integer
#                                                      ^^^^^^^ source.liquidsoap
#                                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                                ^ source.liquidsoap
#                                                                 ^ source.liquidsoap constant.numeric.integer
#                                                                  ^^^^ source.liquidsoap
>  t(list.assoc.remove.all("c", [("a",1),("b",2)]), [("a",1),("b",2)])
#^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^^^^ source.liquidsoap
#                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^^^ source.liquidsoap
#                                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap constant.numeric.integer
#                                              ^^^^^^^ source.liquidsoap
#                                                     ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                        ^ source.liquidsoap
#                                                         ^ source.liquidsoap constant.numeric.integer
#                                                          ^^^ source.liquidsoap
#                                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                                ^ source.liquidsoap
#                                                                 ^ source.liquidsoap constant.numeric.integer
#                                                                  ^^^^ source.liquidsoap
>  t(list.for_all(fun (n) -> n > 0, []), true)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                    ^^^^^^^^^^^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^^^^^^^^^^^^^ source.liquidsoap
>  t(list.for_all(fun (n) -> n > 0, [1,2,3]), true)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                    ^^^^^^^^^^^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^^^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^^^^^^^^^^ source.liquidsoap
>  t(list.for_all(fun (n) -> n > 0, [1,0,3]), false)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                    ^^^^^^^^^^^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^^^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^^^^^^^^^^^ source.liquidsoap
>  t(list.exists(fun (n) -> n > 0, [0,2,0]), true)
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^^^ source.liquidsoap keyword.control.liquidsoap
#                   ^^^^^^^^^^^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^^^^^^^^^^ source.liquidsoap
>  t(list.exists(fun (n) -> n > 0, [0,0,0]), false)
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^^^ source.liquidsoap keyword.control.liquidsoap
#                   ^^^^^^^^^^^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^^^^^^^^^^^ source.liquidsoap
>  t(list.fold(fun(x,y)->x+y,1,[2,3,4]), 10)
#^^^^^^^^^^^^^^ source.liquidsoap
#              ^^^ source.liquidsoap keyword.control.liquidsoap
#                 ^^^^^^^^^^^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^^^^ source.liquidsoap
#                                        ^^ source.liquidsoap constant.numeric.integer
#                                          ^^ source.liquidsoap
>  t(list.fold.right(fun(x,y)->x+y,1,[2,3,4]), 10)
#^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^^^ source.liquidsoap keyword.control.liquidsoap
#                       ^^^^^^^^^^^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^^^^ source.liquidsoap
#                                              ^^ source.liquidsoap constant.numeric.integer
#                                                ^^ source.liquidsoap
>  t(list.prefix(2,[1,2,3]), [1,2])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^^^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^^^ source.liquidsoap
>  t(list.prefix(3,[1]), [1])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^^^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^^^ source.liquidsoap
>  t(list.init(4, fun(x)->2*x), [0,2,4,6])
#^^^^^^^^^^^^^^ source.liquidsoap
#              ^ source.liquidsoap constant.numeric.integer
#               ^^ source.liquidsoap
#                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                    ^^^^^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^^^^^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^^ source.liquidsoap
>  t(list.index(fun(x)->x==0,[1,2,0,3]), 2)
#^^^^^^^^^^^^^^^ source.liquidsoap
#               ^^^ source.liquidsoap keyword.control.liquidsoap
#                  ^^^^^^^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^^^^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^^ source.liquidsoap
>  t(list.index(fun(x)->x==0,[1,2,3]), 3)
#^^^^^^^^^^^^^^^ source.liquidsoap
#               ^^^ source.liquidsoap keyword.control.liquidsoap
#                  ^^^^^^^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
>  t(list.insert(0, 1, []), [1])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^^^^^^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^^ source.liquidsoap
>  t(list.insert(0, 1, [2, 3, 4]), [1, 2, 3, 4])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^^^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^^ source.liquidsoap
#                                            ^ source.liquidsoap constant.numeric.integer
#                                             ^^^ source.liquidsoap
>  t(list.insert(1, 2, [1, 3, 4]), [1, 2, 3, 4])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^^^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^^ source.liquidsoap
#                                            ^ source.liquidsoap constant.numeric.integer
#                                             ^^^ source.liquidsoap
>  t(list.insert(4, 5, [1, 2, 3, 4]), [1, 2, 3, 4, 5])
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^^ source.liquidsoap
#                       ^ source.liquidsoap constant.numeric.integer
#                        ^^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^ source.liquidsoap
#                             ^ source.liquidsoap constant.numeric.integer
#                              ^^ source.liquidsoap
#                                ^ source.liquidsoap constant.numeric.integer
#                                 ^^^^^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^^ source.liquidsoap
#                                            ^ source.liquidsoap constant.numeric.integer
#                                             ^^ source.liquidsoap
#                                               ^ source.liquidsoap constant.numeric.integer
#                                                ^^ source.liquidsoap
#                                                  ^ source.liquidsoap constant.numeric.integer
#                                                   ^^^ source.liquidsoap
>  t(list.flatten([[1,2],[3,4]]), [1,2,3,4])
#^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^ source.liquidsoap
#                     ^ source.liquidsoap constant.numeric.integer
#                      ^^^ source.liquidsoap
#                         ^ source.liquidsoap constant.numeric.integer
#                          ^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^^^^^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^ source.liquidsoap
#                                    ^ source.liquidsoap constant.numeric.integer
#                                     ^ source.liquidsoap
#                                      ^ source.liquidsoap constant.numeric.integer
#                                       ^ source.liquidsoap
#                                        ^ source.liquidsoap constant.numeric.integer
#                                         ^^^ source.liquidsoap
>  def even(x) =
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
#     ^^^^^^^^^^^ source.liquidsoap
>    (x/2)*2 == x
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
#          ^ source.liquidsoap constant.numeric.integer
#           ^^^^^^ source.liquidsoap
>  end
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
>  t(list.find(default=42,even,[1,3,5]), 42)
#^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                      ^^ source.liquidsoap constant.numeric.integer
#                        ^^^^^^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^^^^ source.liquidsoap
#                                        ^^ source.liquidsoap constant.numeric.integer
#                                          ^^ source.liquidsoap
>  t(list.find(even,[1,3,4,5,6]), 4)
#^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^ source.liquidsoap
#                      ^ source.liquidsoap constant.numeric.integer
#                       ^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^ source.liquidsoap
#                            ^ source.liquidsoap constant.numeric.integer
#                             ^^^^ source.liquidsoap
#                                 ^ source.liquidsoap constant.numeric.integer
#                                  ^^ source.liquidsoap
>  t(list.sort.natural(["b","c","a"]), ["a","b","c"])
#^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^ source.liquidsoap
#                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                              ^ source.liquidsoap
#                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                ^ source.liquidsoap string.quoted.double.liquidsoap
#                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                  ^^^^^ source.liquidsoap
#                                       ^ source.liquidsoap string.quoted.double.liquidsoap
#                                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                                          ^ source.liquidsoap
#                                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                                              ^ source.liquidsoap
#                                               ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                  ^^^ source.liquidsoap
>  l = list.indexed(["a","b","c"])
#^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^ source.liquidsoap string.quoted.double.liquidsoap
#                     ^ source.liquidsoap string.quoted.double.liquidsoap
#                      ^ source.liquidsoap string.quoted.double.liquidsoap
#                       ^ source.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^ source.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^ source.liquidsoap string.quoted.double.liquidsoap
#                              ^ source.liquidsoap string.quoted.double.liquidsoap
#                               ^^^ source.liquidsoap
>  t(l[1], "b")
#^^^^^^ source.liquidsoap
#      ^ source.liquidsoap constant.numeric.integer
#       ^^^ source.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^ source.liquidsoap string.quoted.double.liquidsoap
#            ^ source.liquidsoap string.quoted.double.liquidsoap
#             ^^ source.liquidsoap
>  l = [(1,"a"),(2,"b"),(3,"c")]
#^^^^^^^^ source.liquidsoap
#        ^ source.liquidsoap constant.numeric.integer
#         ^ source.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^ source.liquidsoap string.quoted.double.liquidsoap
#            ^ source.liquidsoap string.quoted.double.liquidsoap
#             ^^^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^ source.liquidsoap
#                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                    ^ source.liquidsoap string.quoted.double.liquidsoap
#                     ^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^^^ source.liquidsoap
>  t(l[2],"b")
#^^^^^^ source.liquidsoap
#      ^ source.liquidsoap constant.numeric.integer
#       ^^ source.liquidsoap
#         ^ source.liquidsoap string.quoted.double.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^ source.liquidsoap string.quoted.double.liquidsoap
#            ^^ source.liquidsoap
>  t(l[27],"")
#^^^^^^ source.liquidsoap
#      ^^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^ source.liquidsoap string.quoted.double.liquidsoap
#            ^^ source.liquidsoap
>  t([1, ...[2,3,4], ...[5,6], 7], [1,2,3,4,5,6,7])
#^^^^^ source.liquidsoap
#     ^ source.liquidsoap constant.numeric.integer
#      ^^^^^^ source.liquidsoap
#            ^ source.liquidsoap constant.numeric.integer
#             ^ source.liquidsoap
#              ^ source.liquidsoap constant.numeric.integer
#               ^ source.liquidsoap
#                ^ source.liquidsoap constant.numeric.integer
#                 ^^^^^^^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^ source.liquidsoap
#                          ^ source.liquidsoap constant.numeric.integer
#                           ^^^ source.liquidsoap
#                              ^ source.liquidsoap constant.numeric.integer
#                               ^^^^ source.liquidsoap
#                                   ^ source.liquidsoap constant.numeric.integer
#                                    ^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^ source.liquidsoap
#                                       ^ source.liquidsoap constant.numeric.integer
#                                        ^ source.liquidsoap
#                                         ^ source.liquidsoap constant.numeric.integer
#                                          ^ source.liquidsoap
#                                           ^ source.liquidsoap constant.numeric.integer
#                                            ^ source.liquidsoap
#                                             ^ source.liquidsoap constant.numeric.integer
#                                              ^ source.liquidsoap
#                                               ^ source.liquidsoap constant.numeric.integer
#                                                ^^^ source.liquidsoap
>
>  let [x,y] = [1,2,3]
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
#     ^^^^^^^^^^ source.liquidsoap
#               ^ source.liquidsoap constant.numeric.integer
#                ^ source.liquidsoap
#                 ^ source.liquidsoap constant.numeric.integer
#                  ^ source.liquidsoap
#                   ^ source.liquidsoap constant.numeric.integer
#                    ^^ source.liquidsoap
>  t(x, 1)
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
>  t(y, 2)
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
>
>  let [..._,x,y] = [1,2,3]
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
#     ^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^ source.liquidsoap
#                      ^ source.liquidsoap constant.numeric.integer
#                       ^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^ source.liquidsoap
>  t(x, 2)
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
>  t(y, 3)
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
>
>  let [x,_,...z] = [1,2,3]
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
#     ^^^^^^^^^^^^^^^ source.liquidsoap
#                    ^ source.liquidsoap constant.numeric.integer
#                     ^ source.liquidsoap
#                      ^ source.liquidsoap constant.numeric.integer
#                       ^ source.liquidsoap
#                        ^ source.liquidsoap constant.numeric.integer
#                         ^^ source.liquidsoap
>  t(x, 1)
#^^^^^^^ source.liquidsoap
#       ^ source.liquidsoap constant.numeric.integer
#        ^^ source.liquidsoap
>  t(z, [3])
#^^^^^^^^ source.liquidsoap
#        ^ source.liquidsoap constant.numeric.integer
#         ^^^ source.liquidsoap
>
>  # Ensure that common methods are kept and others are forgotten
#^^ source.liquidsoap
#  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap comment.line.number-sign.liquidsoap
>  l = [ "a".{b = true, k = 0} , "b".{b = true, l = 1} ]
#^^^^^^^^ source.liquidsoap
#        ^ source.liquidsoap string.quoted.double.liquidsoap
#         ^ source.liquidsoap string.quoted.double.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^^^^^^^^^^^^^^^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^^^ source.liquidsoap
#                                ^ source.liquidsoap string.quoted.double.liquidsoap
#                                 ^ source.liquidsoap string.quoted.double.liquidsoap
#                                  ^ source.liquidsoap string.quoted.double.liquidsoap
#                                   ^^^^^^^^^^^^^^^^ source.liquidsoap
#                                                   ^ source.liquidsoap constant.numeric.integer
#                                                    ^^^^ source.liquidsoap
>  t(list.for_all(fun (x) -> x.b, l), true)
#^^^^^^^^^^^^^^^^^ source.liquidsoap
#                 ^^^ source.liquidsoap keyword.control.liquidsoap
#                    ^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
>  _ = [ "a".{b = true}, "c" ]
#^^^^^^^^ source.liquidsoap
#        ^ source.liquidsoap string.quoted.double.liquidsoap
#         ^ source.liquidsoap string.quoted.double.liquidsoap
#          ^ source.liquidsoap string.quoted.double.liquidsoap
#           ^^^^^^^^^^^^^ source.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^^^ source.liquidsoap
>
>  # There used to be a bug where [x] would loose all its methods.
#^^ source.liquidsoap
#  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap comment.line.number-sign.liquidsoap
>  x = 1
#^^^^^^ source.liquidsoap
#      ^ source.liquidsoap constant.numeric.integer
>  let x.foo = "bla"
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
#     ^^^^^^^^^ source.liquidsoap
#              ^ source.liquidsoap string.quoted.double.liquidsoap
#               ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                  ^ source.liquidsoap string.quoted.double.liquidsoap
>  list.add(x, [2.{foo = "gni"}])
#^^^^^^^^^^^^^^^ source.liquidsoap
#               ^ source.liquidsoap constant.numeric.integer
#                ^^^^^^^^ source.liquidsoap
#                        ^ source.liquidsoap string.quoted.double.liquidsoap
#                         ^^^ source.liquidsoap string.quoted.double.liquidsoap
#                            ^ source.liquidsoap string.quoted.double.liquidsoap
#                             ^^^^ source.liquidsoap
>
>  try
#^^^^^^ source.liquidsoap
>    ignore(list.insert(23, 2, [1, 2, 3]))
#^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                       ^^ source.liquidsoap constant.numeric.integer
#                         ^^ source.liquidsoap
#                           ^ source.liquidsoap constant.numeric.integer
#                            ^^^ source.liquidsoap
#                               ^ source.liquidsoap constant.numeric.integer
#                                ^^ source.liquidsoap
#                                  ^ source.liquidsoap constant.numeric.integer
#                                   ^^ source.liquidsoap
#                                     ^ source.liquidsoap constant.numeric.integer
#                                      ^^^^ source.liquidsoap
>    test.fail()
#^^^^^^^^^^^^^^^^ source.liquidsoap
>  catch err : [error.not_found] do
#^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                                ^^ source.liquidsoap keyword.control.liquidsoap
>    t(err.kind, "not_found")
#^^^^^^^^^^^^^^^^ source.liquidsoap
#                ^ source.liquidsoap string.quoted.double.liquidsoap
#                 ^^^^^^^^^ source.liquidsoap string.quoted.double.liquidsoap
#                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                           ^^ source.liquidsoap
>    t(err.message, "List should have at least 23 elemments")
#^^^^^^^^^^^^^^^^^^^ source.liquidsoap
#                   ^ source.liquidsoap string.quoted.double.liquidsoap
#                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap string.quoted.double.liquidsoap
#                                                          ^ source.liquidsoap string.quoted.double.liquidsoap
#                                                           ^^ source.liquidsoap
>  end
#^^ source.liquidsoap
#  ^^^ source.liquidsoap keyword.control.liquidsoap
>
>  # Test huge lists, see #2162.
#^^ source.liquidsoap
#  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap comment.line.number-sign.liquidsoap
>  # l = list.init(100000, fun(i) -> i)
#^^ source.liquidsoap
#  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ source.liquidsoap comment.line.number-sign.liquidsoap
>
>  if success() then test.pass() else test.fail() end
#^^ source.liquidsoap
#  ^^ source.liquidsoap keyword.control.liquidsoap
#    ^^^^^^^^^^^ source.liquidsoap
#               ^^^^ source.liquidsoap keyword.control.liquidsoap
#                   ^^^^^^^^^^^^^ source.liquidsoap
#                                ^^^^ source.liquidsoap keyword.control.liquidsoap
#                                    ^^^^^^^^^^^^^ source.liquidsoap
#                                                 ^^^ source.liquidsoap keyword.control.liquidsoap
>end
#^^^ source.liquidsoap keyword.control.liquidsoap
>
>test.check(f)
#^^^^^^^^^^^^^^ source.liquidsoap
>